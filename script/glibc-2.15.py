#!/usr/bin/env python3
# copies glibc files used by llamaOS from source

import sys, os, shutil

# source folders
SRC_DIR = "/usr/src/glibc-2.14.1/"
# BUILD_DIR = "/home/wmagato/builds/glibc-2.15/"
DEST_DIR = "/home/wmagato/builds/llamaOS/glibc/"

# create path if not exists
def create_path(path):
   if not os.path.isdir(path):
      print("creating " + path)
      os.makedirs(path)

print("\nllamaOS glibc-2.15 update script...\n")

# verify source folder
if not os.path.isdir(SRC_DIR):
   print("source folder not found: " + SRC_DIR)
   sys.exit(1)

# verify build folder
#if not os.path.isdir(BUILD_DIR):
#   print("build folder not found: " + BUILD_DIR)
#   sys.exit(1)

#create destination folder
create_path(DEST_DIR)

SOURCES = [
 "assert/assert.h",
 "bits/confname.h",
 "bits/dlfcn.h",
 "bits/elfclass.h",
 "bits/environments.h",
 "bits/fcntl.h",
 "bits/ioctl-types.h",
 "bits/ioctls.h",
 "bits/libc-lock.h",
 "bits/libc-tsd.h",
 "bits/local_lim.h",
 "bits/mathinline.h",
 "bits/mman.h",
 "bits/poll.h",
 "bits/posix_opt.h",
 "bits/pthreadtypes.h",
 "bits/sched.h",
 "bits/sigset.h",
 "bits/stat.h",
 "bits/sys_errlist.h",
 "bits/syslog-path.h",
 "bits/time.h",
 "bits/types.h",
 "bits/typesizes.h",
 "bits/uio.h",
 "bits/waitflags.h",
 "bits/waitstatus.h",
 "bits/wchar.h",
 "catgets/nl_types.h",
 "csu/dso_handle.c",
 "ctype/ctype-info.c",
 "ctype/ctype.c",
 "ctype/ctype.h",
 "ctype/ctype_l.c",
 "debug/fortify_fail.c",
 "debug/readonly-area.c",
 "dlfcn/dlfcn.h",
 "elf/elf.h",
 "elf/link.h",
 "gmon/sys/gmon.h",
 "gmon/sys/gmon_out.h",
 "grp/grp.h",
 "iconv/gconv.c",
 "iconv/gconv.h",
 "iconv/gconv_builtin.c",
 "iconv/gconv_builtin.h",
 "iconv/gconv_cache.c",
 "iconv/gconv_charset.h",
 "iconv/gconv_close.c",
 "iconv/gconv_conf.c",
 "iconv/gconv_db.c",
 "iconv/gconv_dl.c",
 "iconv/gconv_int.h",
 "iconv/gconv_open.c",
 "iconv/gconv_simple.c",
 "iconv/gconv_trans.c",
 "iconv/iconvconfig.h",
 "iconv/loop.c",
 "iconv/skeleton.c",
 "include/bits/dlfcn.h",
 "include/bits/locale.h",
 "include/bits/mathcalls.h",
 "include/bits/posix1_lim.h",
 "include/bits/posix2_lim.h",
# "include/bits/stdio_lim.h",
 "include/bits/string2.h",
 "include/bits/unistd.h",
 "include/bits/xopen_lim.h",
 "include/gnu/stubs.h",
 "include/sys/cdefs.h",
 "include/sys/gmon.h",
 "include/sys/gmon_out.h",
 "include/sys/ioctl.h",
 "include/sys/mman.h",
 "include/sys/poll.h",
 "include/sys/select.h",
 "include/sys/stat.h",
 "include/sys/sysinfo.h",
 "include/sys/syslog.h",
 "include/sys/time.h",
 "include/sys/types.h",
 "include/sys/uio.h",
 "include/alloca.h",
 "include/argz.h",
 "include/assert.h",
 "include/atomic.h",
 "include/byteswap.h",
 "include/caller.h",
 "include/ctype.h",
 "include/dlfcn.h",
 "include/elf.h",
 "include/endian.h",
 "include/errno.h",
 "include/fcntl.h",
 "include/features.h",
 "include/fpu_control.h",
 "include/gconv.h",
 "include/getopt.h",
 "include/gmp.h",
 "include/grp.h",
 "include/langinfo.h",
 "include/libc-internal.h",
 "include/libc-symbols.h",
 "include/libintl.h",
 "include/libio.h",
 "include/limits.h",
 "include/link.h",
 "include/locale.h",
 "include/malloc.h",
 "include/math.h",
 "include/nl_types.h",
 "include/nss.h",
 "include/poll.h",
 "include/printf.h",
 "include/pwd.h",
 "include/regex.h",
 "include/sched.h",
 "include/search.h",
 "include/set-hooks.h",
 "include/setjmp.h",
 "include/shlib-compat.h",
 "include/stdio.h",
 "include/stdio_ext.h",
 "include/stdlib.h",
 "include/string.h",
 "include/strings.h",
 "include/stub-tag.h",
 "include/syslog.h",
 "include/time.h",
 "include/tls.h",
 "include/unistd.h",
 "include/wchar.h",
 "include/wctype.h",
 "include/xlocale.h",
 "intl/dcgettext.c",
 "intl/dcigettext.c",
 "intl/explodename.c",
 "intl/finddomain.c",
 "intl/gettextP.h",
 "intl/gmo.h",
 "intl/hash-string.c",
 "intl/hash-string.h",
 "intl/l10nflist.c",
 "intl/libintl.h",
 "intl/loadinfo.h",
 "intl/loadmsgcat.c",
 "intl/localealias.c",
 "intl/plural-eval.c",
 "intl/plural-exp.c",
 "intl/plural-exp.h",
 "intl/plural.c",
 "io/sys/poll.h",
 "io/sys/stat.h",
 "io/access.c",
 "io/close.c",
 "io/fcntl.h",
 "io/fxstat.c",
 "io/fxstat64.c",
 "io/getcwd.c",
 "io/isatty.c",
 "io/lseek64.c",
 "io/mkdir.c",
 "io/open.c",
 "io/poll.c",
 "io/poll.h",
 "io/read.c",
 "io/write.c",
 "io/xstat.c",
 "io/xstat64.c",
 "libio/bits/stdio.h",
 "libio/filedoalloc.c",
 "libio/fileno.c",
 "libio/fileops.c",
 "libio/fputc.c",
 "libio/fseek.c",
 "libio/fseeko.c",
 "libio/fseeko64.c",
 "libio/ftello.c",
 "libio/ftello64.c",
 "libio/genops.c",
 "libio/getc.c",
 "libio/getc_u.c",
 "libio/getchar.c",
 "libio/getchar_u.c",
 "libio/getwc.c",
 "libio/getwc_u.c",
 "libio/getwchar.c",
 "libio/getwchar_u.c",
 "libio/iofclose.c",
 "libio/iofdopen.c",
 "libio/iofflush.c",
 "libio/iofgets.c",
 "libio/iofopen.c",
 "libio/iofopen64.c",
 "libio/iofputs.c",
 "libio/iofread.c",
 "libio/iofwide.c",
 "libio/iofwrite.c",
 "libio/iogetdelim.c",
 "libio/iogetline.c",
 "libio/iolibio.h",
 "libio/iopadn.c",
 "libio/ioputs.c",
 "libio/ioseekoff.c",
 "libio/iosetvbuf.c",
 "libio/ioungetc.c",
 "libio/ioungetwc.c",
 "libio/iovsprintf.c",
 "libio/iovsscanf.c",
 "libio/iowpadn.c",
 "libio/libio.h",
 "libio/libioP.h",
 "libio/putc.c",
 "libio/putc_u.c",
 "libio/putchar.c",
 "libio/putchar_u.c",
 "libio/putwc.c",
 "libio/putwc_u.c",
 "libio/putwchar.c",
 "libio/putwchar_u.c",
 "libio/stdfiles.c",
 "libio/stdio.c",
 "libio/stdio.h",
 "libio/strfile.h",
 "libio/strops.c",
 "libio/vscanf.c",
 "libio/vsnprintf.c",
 "libio/wfiledoalloc.c",
 "libio/wfileops.c",
 "libio/wgenops.c",
 "locale/bits/locale.h",
 "locale/C-address.c",
 "locale/C-collate.c",
 "locale/C-ctype.c",
 "locale/C-identification.c",
 "locale/C-measurement.c",
 "locale/C-messages.c",
 "locale/C-monetary.c",
 "locale/C-name.c",
 "locale/C-numeric.c",
 "locale/C-paper.c",
 "locale/C-telephone.c",
 "locale/C-time.c",
 "locale/C-translit.h",
 "locale/C_name.c",
 "locale/SYS_libc.c",
 "locale/categories.def",
 "locale/coll-lookup.c",
 "locale/coll-lookup.h",
 "locale/elem-hash.h",
 "locale/findlocale.c",
 "locale/global-locale.c",
 "locale/hashval.h",
 "locale/langinfo.h",
 "locale/lc-ctype.c",
 "locale/loadarchive.c",
 "locale/loadlocale.c",
 "locale/locale.h",
 "locale/localeinfo.h",
 "locale/localename.c",
 "locale/locarchive.h",
 "locale/mb_cur_max.c",
 "locale/outdigits.h",
 "locale/outdigitswc.h",
 "locale/setlocale.c",
 "locale/uselocale.c",
 "locale/weight.h",
 "locale/weightwc.h",
 "locale/xlocale.c",
 "locale/xlocale.h",
 "malloc/arena.c",
 "malloc/hooks.c",
 "malloc/malloc.c",
 "malloc/malloc.h",
 "malloc/morecore.c",
 "math/bits/mathcalls.h",
 "math/math.h",
 "math/math_private.h",
 "misc/sys/cdefs.h",
 "misc/sys/ioctl.h",
 "misc/sys/mman.h",
 "misc/sys/select.h",
 "misc/sys/syslog.h",
 "misc/sys/uio.h",
 "misc/init-misc.c",
 "misc/lseek.c",
 "misc/madvise.c",
 "misc/mmap.c",
 "misc/mmap64.c",
 "misc/mprotect.c",
 "misc/munmap.c",
 "misc/sbrk.c",
 "misc/search.h",
 "misc/tsearch.c",
 "misc/writev.c",
 "nss/nss.h",
 "posix/bits/posix1_lim.h",
 "posix/bits/posix2_lim.h",
 "posix/bits/unistd.h",
 "posix/sys/types.h",
 "posix/confstr.c",
 "posix/environ.c",
 "posix/fpathconf.c",
 "posix/getegid.c",
 "posix/geteuid.c",
 "posix/getgid.c",
 "posix/getopt.h",
 "posix/getuid.c",
 "posix/pathconf.c",
 "posix/regcomp.c",
 "posix/regex.c",
 "posix/regex.h",
 "posix/regex_internal.c",
 "posix/regex_internal.h",
 "posix/regexec.c",
 "posix/sched.h",
 "posix/unistd.h",
 "pwd/pwd.h",
 "setjmp/setjmp.h",
 "stdio-common/_i18n_number.h",
 "stdio-common/_itoa.c",
 "stdio-common/_itoa.h",
 "stdio-common/_itowa.h",
 "stdio-common/fprintf.c",
 "stdio-common/fxprintf.c",
 "stdio-common/itoa-digits.c",
 "stdio-common/itoa-udigits.c",
 "stdio-common/itowa-digits.c",
 "stdio-common/printf-parse.h",
 "stdio-common/printf-parsemb.c",
 "stdio-common/printf-parsewc.c",
 "stdio-common/printf.c",
 "stdio-common/printf.h",
 "stdio-common/printf_fp.c",
 "stdio-common/printf_fphex.c",
 "stdio-common/reg-modifier.c",
 "stdio-common/reg-printf.c",
 "stdio-common/reg-type.c",
 "stdio-common/snprintf.c",
 "stdio-common/sprintf.c",
 "stdio-common/sscanf.c",
 "stdio-common/stdio_ext.h",
 "stdio-common/vfprintf.c",
 "stdio-common/vfscanf.c",
 "stdio-common/vfwprintf.c",
 "stdlib/add_n.c",
 "stdlib/addmul_1.c",
 "stdlib/alloca.h",
 "stdlib/bsearch.c",
 "stdlib/cmp.c",
 "stdlib/cxa_atexit.c",
 "stdlib/divrem.c",
 "stdlib/errno.h",
 "stdlib/exit.c",
 "stdlib/exit.h",
 "stdlib/fpioconst.c",
 "stdlib/fpioconst.h",
 "stdlib/getenv.c",
 "stdlib/gmp-impl.h",
 "stdlib/gmp.h",
 "stdlib/grouping.c",
 "stdlib/grouping.h",
 "stdlib/longlong.h",
 "stdlib/lshift.c",
 "stdlib/msort.c",
 "stdlib/mul.c",
 "stdlib/mul_1.c",
 "stdlib/mul_n.c",
 "stdlib/qsort.c",
 "stdlib/rshift.c",
 "stdlib/setenv.c",
 "stdlib/stdlib.h",
 "stdlib/strtod.c",
 "stdlib/strtod_l.c",
 "stdlib/strtof.c",
 "stdlib/strtof_l.c",
 "stdlib/strtol.c",
 "stdlib/strtol_l.c",
 "stdlib/strtold.c",
 "stdlib/strtold_l.c",
 "stdlib/strtoul.c",
 "stdlib/strtoul_l.c",
 "stdlib/sub_n.c",
 "stdlib/submul_1.c",
 "stdlib/tens_in_limb.c",
 "string/bits/string2.h",
 "string/_strerror.c",
 "string/argz-addsep.c",
 "string/argz-append.c",
 "string/argz-count.c",
 "string/argz-create.c",
 "string/argz-ctsep.c",
 "string/argz-delete.c",
 "string/argz-extract.c",
 "string/argz-insert.c",
 "string/argz-next.c",
 "string/argz-replace.c",
 "string/argz-stringify.c",
 "string/argz.h",
 "string/bcopy.c",
 "string/byteswap.h",
 "string/bzero.c",
 "string/endian.h",
 "string/memccpy.c",
 "string/memchr.c",
 "string/memcmp.c",
 "string/memcpy.c",
 "string/memfrob.c",
 "string/memmem.c",
 "string/memmove.c",
 "string/mempcpy.c",
 "string/memrchr.c",
 "string/memset.c",
 "string/rawmemchr.c",
 "string/stpcpy.c",
 "string/stpncpy.c",
 "string/str-two-way.h",
 "string/strcasecmp.c",
 "string/strcasecmp_l.c",
 "string/strcasestr.c",
 "string/strcat.c",
 "string/strchr.c",
 "string/strchrnul.c",
 "string/strcmp.c",
 "string/strcoll.c",
 "string/strcoll_l.c",
 "string/strcpy.c",
 "string/strdup.c",
 "string/strerror.c",
 "string/strerror_l.c",
 "string/string.h",
 "string/strings.h",
 "string/strlen.c",
 "string/strncase.c",
 "string/strncase_l.c",
 "string/strncat.c",
 "string/strncmp.c",
 "string/strncpy.c",
 "string/strndup.c",
 "string/strnlen.c",
 "string/strrchr.c",
 "string/strsep.c",
 "string/strstr.c",
 "string/strtok.c",
 "string/strtok_r.c",
 "string/strxfrm.c",
 "string/strxfrm_l.c",
 "string/swab.c",
 "string/wordcopy.c",
 "time/sys/time.h",
 "time/alt_digit.c",
 "time/era.c",
 "time/gettimeofday.c",
 "time/lc-time-cleanup.c",
 "time/localtime.c",
 "time/mktime.c",
 "time/offtime.c",
 "time/strftime.c",
 "time/strftime_l.c",
 "time/time.h",
 "time/tzfile.c",
 "time/tzset.c",
 "time/wcsftime.c",
 "time/wcsftime_l.c",
 "timezone/tzfile.h",
 "wcsmbs/btowc.c",
 "wcsmbs/mbrlen.c",
 "wcsmbs/mbrtowc.c",
 "wcsmbs/mbsnrtowcs.c",
 "wcsmbs/mbsrtowcs.c",
 "wcsmbs/mbsrtowcs_l.c",
 "wcsmbs/wchar.h",
 "wcsmbs/wcpcpy.c",
 "wcsmbs/wcpncpy.c",
 "wcsmbs/wcrtomb.c",
 "wcsmbs/wcschr.c",
 "wcsmbs/wcschrnul.c",
 "wcsmbs/wcscmp.c",
 "wcsmbs/wcscoll.c",
 "wcsmbs/wcscoll_l.c",
 "wcsmbs/wcslen.c",
 "wcsmbs/wcsmbsload.c",
 "wcsmbs/wcsmbsload.h",
 "wcsmbs/wcsnlen.c",
 "wcsmbs/wcsrtombs.c",
 "wcsmbs/wcsstr.c",
 "wcsmbs/wcsxfrm.c",
 "wcsmbs/wcsxfrm_l.c",
 "wcsmbs/wctob.c",
 "wcsmbs/wmemchr.c",
 "wcsmbs/wmemcmp.c",
 "wcsmbs/wmemcpy.c",
 "wcsmbs/wmemmove.c",
 "wcsmbs/wmempcpy.c",
 "wcsmbs/wmemset.c",
 "wctype/iswctype.c",
 "wctype/towctrans.c",
 "wctype/wcfuncs.c",
 "wctype/wcfuncs_l.c",
 "wctype/wchar-lookup.h",
 "wctype/wctrans.c",
 "wctype/wctype.c",
 "wctype/wctype.h",
# "config.h",
 "version.h",
]

# copy the sources to the destination folder
for file in SOURCES:
   create_path(DEST_DIR + os.path.dirname(file))
   print("  copying " + file)
   shutil.copyfile(SRC_DIR + file, DEST_DIR + file)
